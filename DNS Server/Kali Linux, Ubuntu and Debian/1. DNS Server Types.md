
# **ğŸ–¥ï¸ What is a DNS Server?**  
A **DNS (Domain Name System) server** translates human-readable domain names (like `example.com`) into IP addresses (like `192.168.1.1`). This is essential for accessing websites and online services.  

---

# **ğŸŒ Types of DNS Servers ğŸŒ**  

## **1ï¸âƒ£ Non-Authoritative (Recursive) Nameserver ğŸ”„**  
A **recursive DNS server** does **not** store original DNS records but finds answers by querying other DNS servers. It follows these steps:  
1. Receives a query for `example.com`.  
2. Asks the **root server** â†’ then a **TLD server** (`.com` nameserver) â†’ then the **authoritative server**.  
3. Retrieves the IP address and returns it to the user.  

âœ… **Example: Testing DNS resolution using Googleâ€™s recursive nameserver**  
```bash
dig example.com @8.8.8.8
```

---

## **2ï¸âƒ£ Caching Nameserver ğŸª**  
A **caching DNS server** temporarily stores previously resolved queries. This speeds up future queries and reduces the load on authoritative servers.  

ğŸ”¹ If someone queries `example.com`, the caching server stores the result. The next time someone asks for `example.com`, it responds instantly without re-querying the internet.  

âœ… **Example: Checking cached DNS records**  
```bash
dig example.com
```
ğŸ“Œ If the result is already stored, the response time is much faster!

âœ… **Installing a Caching DNS Server on Debian, Kali, Ubuntu**  
```bash
sudo apt update && sudo apt install bind9
```
ğŸ”¹ This installs **BIND9**, which supports DNS caching.  

âœ… **Enable Caching in BIND9 (`/etc/bind/named.conf.options`)**  
```bash
options {
    directory "/var/cache/bind";
    recursion yes;
    allow-query { any; };
};
```
ğŸ”¹ Restart BIND9 to apply changes:  
```bash
sudo systemctl restart bind9
```

---

## **3ï¸âƒ£ Forwarding Nameserver ğŸ“¤**  
A **forwarding DNS server** does not resolve queries itself. Instead, it **forwards** DNS queries to another DNS server (usually a caching or authoritative server).  

ğŸ”¹ Common in corporate networks to centralize DNS management.  

âœ… **Example: Configuring a forwarding DNS server (Linux)**  
```bash
echo "nameserver 8.8.8.8" | sudo tee /etc/resolv.conf
```
This tells the system to **forward** all DNS queries to Googleâ€™s public DNS (`8.8.8.8`).

âœ… **Configuring Forwarders in BIND9 (`/etc/bind/named.conf.options`)**  
```bash
options {
    forwarders {
        8.8.8.8;
        8.8.4.4;
    };
};
```
ğŸ”¹ Restart BIND9:  
```bash
sudo systemctl restart bind9
```

---

## **4ï¸âƒ£ Authoritative Nameservers ğŸ”**  
Authoritative DNS servers store the **actual DNS records** for domains and provide direct answers to DNS queries.

### **Primary (Master) Nameserver ğŸ‘‘**  
- Holds the **original DNS records** for a domain.  
- Responsible for managing DNS records and updates.  

âœ… **Example: Configuration for a primary nameserver (`/etc/bind/named.conf.local`)**  
```bash
zone "example.com" {
    type master;
    file "/etc/bind/db.example.com";
};
```
ğŸ“Œ The file `/etc/bind/db.example.com` contains actual DNS records for `example.com`.

âœ… **Create the DNS Record File (`/etc/bind/db.example.com`)**  
```bash
$TTL 86400
@   IN  SOA  ns1.example.com. admin.example.com. (
        20240404  ; Serial
        3600      ; Refresh
        1800      ; Retry
        604800    ; Expire
        86400 )   ; Minimum TTL

    IN  NS  ns1.example.com.
ns1 IN  A   192.168.1.10
www IN  A   192.168.1.20
```

---

### **Secondary (Slave) Nameserver ğŸ“¦**  
- Acts as a **backup** to the primary nameserver.  
- Copies data from the primary server but **does not** modify DNS records.  
- Improves reliability in case the primary server goes down.  

âœ… **Example: Configuration for a secondary nameserver (`/etc/bind/named.conf.local`)**  
```bash
zone "example.com" {
    type slave;
    file "/etc/bind/db.example.com";
    masters { 192.168.1.1; };
};
```
ğŸ“Œ The secondary nameserver syncs its data from the **primary server (192.168.1.1)**.

---

## **ğŸ“Š Summary Table**  
| **DNS Type**                  | **Function** |
|-------------------------------|-------------|
| ğŸ”„ **Recursive Nameserver**  | Finds DNS records by querying other servers |
| ğŸª **Caching Nameserver**    | Stores DNS responses temporarily to speed up queries |
| ğŸ“¤ **Forwarding Nameserver** | Passes DNS queries to another server for resolution |
| ğŸ‘‘ **Primary Nameserver**    | Stores original DNS records for a domain |
| ğŸ“¦ **Secondary Nameserver**  | Acts as a backup and gets data from the primary |

---
